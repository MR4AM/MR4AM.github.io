webpackJsonp([44],{RzBx:function(e,t){},spjA:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("Dd8w"),n=o.n(a),s=o("NYxO"),i=o("vgQg"),r=o("mtWM"),c=o.n(r),l={name:"Header",props:{userInfo:{type:Object}},components:{},data:function(){return{langIconDict:{en:"iwl-icon-zhongwenmoshi",zh:"iwl-icon-yingwenmoshi"},sysName:"中外运管理中心",inputSearch:"",pos:0,ticking:!1,header:"",token:"",avatarUrl:"/spop/static/image/manage/defaultImg.png"}},mounted:function(){var e=window.location.href;this.header=document.getElementsByTagName("header")[0],e.indexOf("page")>1?this.header.className="el-header homeHeader":this.header.className="el-header";var t=0,o=navigator.userAgent.indexOf("Firefox")>-1;window.onunload=function(e){Date.now()-t<=5&&window.localStorage.setItem("token","")},window.onbeforeunload=function(e){t=Date.now(),o&&window.localStorage.setItem("token","")}},computed:n()({},Object(s.b)(["curLang","isLogined"]),{isScroll:function(){var e=this,t=window.location.href;window.addEventListener("scroll",function(o){t.indexOf("page")>-1?(e.pos=window.scrollY,e.pos>100&&!e.ticking&&(e.header.className="el-header homeHeader scrolledDown",e.ticking=!0),e.pos<100&&e.ticking&&(e.header.className="el-header homeHeader",e.ticking=!1)):(e.pos=0,e.ticking=!1,e.header.className="el-header")})}}),created:function(){},methods:{toLogout:function(){var e=this,t=(window.localStorage.getItem("access_token"),window.localStorage.getItem("refresh_token")),o=new FormData;o.set("refresh_token",t),o.set("grant_type","refresh_token");var a=i.a.axiosLoginConfig;c.a.post("/cfsc-uaa/oauth/token?grant_type=refresh_token&refresh_token="+t,o,a).then(function(t){window.isRefreshing=!1,window.localStorage.setItem("access_token",t.data.access_token),window.localStorage.setItem("refresh_token",t.data.refresh_token),e.token=window.localStorage.getItem("access_token"),c()({method:"delete",url:"/cfsc-uaa/oauth/token?accessToken="+e.token,headers:a.headers}).then(function(t){t.data&&0==t.data.code?(e.$store.commit("setAppLogined",!1),window.localStorage.setItem("access_token",""),window.localStorage.setItem("refresh_token",""),window.localStorage.setItem("cacheTabList",""),window.localStorage.setItem("historyUrl",""),window.location="/spop/login/"):e.$notify.error({title:"提示",message:t.data.message})}).catch(function(t){console.info(t),e.$notify.error({title:"提示",message:"请求接口失败，请检查网络"})}),console.log(t)}).catch(function(e){window.localStorage.removeItem("refresh_token"),window.localStorage.removeItem("access_token")})},toLogin:function(){window.location.href="/spop/login/"},toRegister:function(){window.location.href="/spop/login/choseRole"}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-header",{attrs:{height:"64px",isScroll:e.isScroll}},[o("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[o("div",{staticClass:"left-part"},[o("img",{attrs:{src:"/spop/static/image/manage/ZWY.png",alt:"logo",width:"50%"}}),e._v(" "),o("span",{staticClass:"system-name"},[e._v("|")])]),e._v(" "),o("div",{staticClass:"right-part"},[o("div",{staticClass:"el-dropdown"},[o("div",{staticClass:"user-avatar"},[o("img",{attrs:{src:e.avatarUrl,alt:""}}),e._v(" "),o("span",[e._v(e._s(e.userInfo.username))])])]),e._v(" "),o("div",{staticClass:"el-dropdown"},[o("div",{staticClass:"logoutDiv head-item",on:{click:e.toLogout}},[o("span",[e._v("|")]),o("span",{staticClass:"iconfont icon-exit"}),e._v("退出\n        ")])])])])],1)},staticRenderFns:[]};var g=o("VU/8")(l,d,!1,function(e){o("RzBx")},"data-v-34a24aa6",null);t.default=g.exports}});