webpackJsonp([3],{FFG4:function(e,t){},KvKp:function(e,t,o){"use strict";var n=o("LcI6"),r=o.n(n),a=o("//Fk"),i=o.n(a),s=o("mtWM"),l=o.n(s),g=o("7+uW"),u=o("vgQg"),c=l.a.create({timeout:5e3});u.a.axiosLoginConfig;window.isRefreshing=!1;c.interceptors.request.use(function(e){window.localStorage.getItem("access_token"),window.localStorage.getItem("refresh_token");return e},function(e){return i.a.reject(e)});var f=c,d=o("mw3O"),p=o.n(d),m=o("lbHh"),v=o.n(m),w={setPageTitle:function(e){e&&(window.document.title=e)},Logline:{setLog:function(e,t,o,n){r.a.using(r.a.PROTOCOL.INDEXEDDB),e||(e="api-request");var a=new r.a(e);switch(t){case"info":a.info(o);break;case"error":a.error(o,n);break;case"warning":a.warning(o);break;default:a.error(o,n)}},getLog:function(e,t,o){e&&t?r.a.get(e,t,function(e){o?o(e):console.log(e)}):e&&!t?r.a.get(e,function(e){o?o(e):console.log(e)}):r.a.all(function(e){o?o(e):console.log(e)})},cleanLog:function(){r.a.clean()}},sendReq:function(e){var t=void 0,o=void 0;switch(e.req.ctxType){case"json":t=u.a.axiosJsonConfig,o=e.req.data;break;case"formdata":t=u.a.axiosFormDataConfig,o=p.a.stringify(e.req.data);break;default:t=u.a.axiosJsonConfig,o=e.req.data}"post"===e.req.method?f.post(e.queryUrl,o,t).then(function(t){"0"===t.data.code?e.req.success?e.req.success(t):console.log(t):(w.Logline.setLog("","error","api fail",{errMsg:t.data.message,params:e}),e.req.fail?e.req.fail(t):console.log(t))}).catch(function(t){w.Logline.setLog("","error","request fail",{errMsg:t.toString(),params:e}),e.req.error?e.req.error(t):g.default.prototype.$message.error("请求接口失败，请检查网络")}):f.get(e.queryUrl,o).then(function(t){0===t.data.code?e.req.success?e.req.success(t):console.log(t):(w.Logline.setLog("","error","api fail",{errMsg:t.data.message,params:e}),e.req.fail?e.req.fail(t):console.log(t))}).catch(function(t){w.Logline.setLog("","error","request fail",{errMsg:t.toString(),params:e}),e.req.error?e.req.error(t):g.default.prototype.$message.error("请求接口失败，请检查网络")})},getDeviceInfo:function(e){var t=navigator.userAgent;if("browser"===e){var o=t.indexOf("Opera")>-1,n=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!o,r=t.indexOf("Firefox")>-1,a=t.indexOf("Safari")>-1,i=t.indexOf("Chrome")>-1,s=t.indexOf("Edge")>-1;if(!n)return r?"Firefox":o?"Opera":i?"Chrome":s?"Edge":a?"Safari":"Unknown";var l,g,u,c,f,d,p;new RegExp("MSIE (\\d+\\.\\d+);").test(t);var m=parseFloat(RegExp.$1);if(l="5.5"===m,g="6.0"===m,u="7.0"===m,c="8.0"===m,f="9.0"===m,d="10.0"===m,p="11.0"===m,"5"===m)return"IE5";if(l)return"IE55";if(g)return"IE6";if(u)return"IE7";if(c)return"IE8";if(f)return"IE9";if(d)return"IE10";if(p)return"IE11"}else{if("device"===e){var v=t.indexOf("Android")>-1,w=t.indexOf("iPhone")>-1,h=t.indexOf("iPad")>-1;return v?"Android":w?"Iphone":h?"Ipad":"Unknown"}if("platform"===e)return navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)?"MOBILE":"PC"}},setToken:function(e){v.a.set("spoptoken",e,{expires:new Date((new Date).getTime()+216e5)||1})},getToken:function(){var e=v.a.get("spoptoken");return e||!1}};t.a=w},RTpq:function(e,t,o){"use strict";var n=o("Dd8w"),r=o.n(n),a=o("vgQg").a.apiHost,i={login:a+"/oauth/token",logout:a+"/logout",getUserRightInfo:a+"/basic/menu/findMenuTree",getMenus:a+"/basic/menu/findMenuTree",getSysMsg:a+"/getSysMsg",getMessageNum:a+"/mq/msg/findMsgPage"},s=o("KvKp"),l={login:function(e){e.method="post";var t=i.login;s.a.sendReq({queryUrl:t,req:r()({},e)})},logout:function(e){e.method="post";var t=i.logout;s.a.sendReq({queryUrl:t,req:e})},getUserRightInfo:function(e){e.method="post";var t=i.getUserRightInfo;s.a.sendReq({queryUrl:t,req:e})},getMenus:function(e){e.method="post";var t=i.getMenus;s.a.sendReq({queryUrl:t,req:e})},getSysMsg:function(e){e.method="post";var t=i.getSysMsg;s.a.sendReq({queryUrl:t,req:e})},getMessageNum:function(e){e.method="post";var t=i.getMessageNum;s.a.sendReq({queryUrl:t,req:e})}};t.a=l},TR5l:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Dd8w"),r=o.n(n),a=o("NYxO"),i=(o("RTpq"),o("KvKp"),o("vgQg")),s=o("mtWM"),l=o.n(s),g={name:"Login",data:function(){return{langIconDict:{en:"iwl-icon-zhongwenmoshi",zh:"iwl-icon-yingwenmoshi"},loginForm:{username:{placeholder:"login.userName",value:""},pwd:{placeholder:"login.userPwd",value:""},isRemeber:!1},footData:{companyInfo:'粤ICP备14004400号 | 增值电信业务经营许可编号：粤B2-20140394 | Copyright© 2013-2018 <a href="http://www.y2t.com">www.y2t.com</a> All Rights Reserved'},errMsg:"",rules:{"username.value":[{required:!0,message:this.$t("请输入手机号码"),trigger:"blur"}],"pwd.value":[{required:!0,message:this.$t("请输入密码"),trigger:"blur"}]}}},computed:r()({},Object(a.b)(["curLang"])),created:function(){},methods:{toLogin:function(){var e=this;e.$refs.loginForm.validate(function(t){if(!t)return!1;var o=new FormData;o.set("username",e.loginForm.username.value),o.set("password",e.loginForm.pwd.value),o.set("grant_type","password");var n=i.a.axiosLoginConfig;l.a.post("/cfsc-uaa/login",o,n).then(function(t){if(console.info(t),200==t.status){var o=!!t.data.access_token;e.$store.commit("setAppLogined",o),window.localStorage.setItem("cacheTabList",""),window.localStorage.setItem("access_token",t.data.access_token),window.localStorage.setItem("refresh_token",t.data.refresh_token);var n=window.localStorage.getItem("historyUrl"),r=window.localStorage.getItem("historyTime"),a=(new Date).getTime()-parseInt(r)<3e5,i=!0;n&&(i=!(n.indexOf("customerService")>-1)),window.location=a&&n&&i?n:"/spop/manage/"}else e.errMsg="系统异常！"}).catch(function(t){console.info(t),t.response&&400==t.response.status?e.errMsg="账号或密码错误！":e.errMsg="请求接口失败，请检查网络"})})},changeLang:function(){var e=localStorage.getItem("lang");e&&"zh"!==e?localStorage.setItem("lang","zh"):localStorage.setItem("lang","en"),window.location.reload()},toHomePage:function(){window.location.href="/spop/manage/"},toRegister:function(){this.$router.push({path:"/spop/login/choseRole"})},toForget:function(){this.$router.push({path:"/spop/login/to/forgetPw"})}}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-ctx"},[o("el-container",{staticClass:"login-wrp"},[o("el-header",{staticClass:"login-banner",attrs:{height:"100px"}}),e._v(" "),o("div",{staticClass:"login-main",staticStyle:{width:"80%"}},[o("div",{staticClass:"login-pannel"},[o("div",{staticClass:"login-title"},[e._v("中外运国际集拼运营平台")]),e._v(" "),o("el-form",{ref:"loginForm",attrs:{"label-position":"left",rules:e.rules,model:e.loginForm}},[o("el-form-item",{attrs:{prop:"username.value"}},[o("el-input",{attrs:{placeholder:"请输入手机号码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toLogin(t)}},model:{value:e.loginForm.username.value,callback:function(t){e.$set(e.loginForm.username,"value","string"==typeof t?t.trim():t)},expression:"loginForm.username.value"}},[o("i",{staticClass:"icon icon-user",attrs:{slot:"suffix"},slot:"suffix"})])],1),e._v(" "),o("el-form-item",{attrs:{prop:"pwd.value"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toLogin(t)}},model:{value:e.loginForm.pwd.value,callback:function(t){e.$set(e.loginForm.pwd,"value",t)},expression:"loginForm.pwd.value"}},[o("i",{staticClass:"icon icon-password",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),e._v(" "),o("el-button",{staticClass:"login-button",attrs:{type:"primary"},on:{click:e.toLogin}},[e._v("登录")]),e._v(" "),o("p",{staticClass:"error-tip"},[e._v(e._s(e.errMsg))])],1)])],1)],1)},staticRenderFns:[]};var c=o("VU/8")(g,u,!1,function(e){o("FFG4")},null,null);t.default=c.exports},vgQg:function(e,t,o){"use strict";t.a={apiHost:"/spop-web",isMock:!1,axiosFormDataConfig:{headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:2e4},axiosJsonConfig:{headers:{"Content-Type":"application/json"},timeout:2e4},axiosLoginConfig:{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic YW5kcm9pZDphbmRyb2lk"},timeout:2e4}}}});