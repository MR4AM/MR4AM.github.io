webpackJsonp([18],{"/dBy":function(e,t){},"1+AF":function(e,t,a){"use strict";t.a={name:"Base",props:{isLong:{type:Boolean},params:{type:Object}},mounted:function(){var e=this;setTimeout(function(){e.$store.commit("setLoading",!1)},100)},activated:function(){var e=this;setTimeout(function(){e.$store.commit("setLoading",!1)},100)}}},H1mJ:function(e,t){},T9Vh:function(e,t){},VSY0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("Dd8w"),o=a.n(l),r=a("vgQg").a.apiHost,i={queryAllocation:r+"/allocation/findAllocationPage",createAllocation:r+"/allocation/createAllocation",updateAllocation:r+"/allocation/editAllocation",changeAllocation:r+"/allocation/changeAllocationStatus",detailAllocation:r+"/allocation/getAllocationDetails"},s=a("KvKp"),n={queryAllocation:function(e){e.method="post";var t=i.queryAllocation;s.a.sendReq({queryUrl:t,req:e})},createAllocation:function(e){e.method="post";var t=i.createAllocation;s.a.sendReq({queryUrl:t,req:e})},updateAllocation:function(e){e.method="post";var t=i.updateAllocation;s.a.sendReq({queryUrl:t,req:e})},changeAllocation:function(e){e.method="post";var t=i.changeAllocation;s.a.sendReq({queryUrl:t,req:e})},detailAllocation:function(e){e.method="post";var t=i.detailAllocation;s.a.sendReq({queryUrl:t,req:e})}},c=a("1+AF"),u={name:"InOrderSearch",extends:c.a,data:function(){return{searchForm:{}}},methods:{handleFilter:function(){this.$emit("on-search",this.searchForm)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchDiv"},[a("div",{staticClass:"filter-container",staticStyle:{width:"100%"}},[a("el-form",{ref:"searchForm",attrs:{"label-position":"right",model:e.searchForm}},[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"配载单号:",prop:"asnNo"}},[a("el-input",{attrs:{placeholder:"请输入ASN订单号"},model:{value:e.searchForm.asnNo,callback:function(t){e.$set(e.searchForm,"asnNo",t)},expression:"searchForm.asnNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"订单状态:"}},[a("el-select",{attrs:{placeholder:"请选择订单状态",clearable:""},model:{value:e.searchForm.allocationStatus,callback:function(t){e.$set(e.searchForm,"allocationStatus",t)},expression:"searchForm.allocationStatus"}},[a("el-option",{attrs:{label:"待预约",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"待审核",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"已审核",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"已出园",value:"4"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"车牌号:",prop:"sapPoNo"}},[a("el-input",{attrs:{placeholder:"请输入SAP PO订单号"},model:{value:e.searchForm.sapPoNo,callback:function(t){e.$set(e.searchForm,"sapPoNo",t)},expression:"searchForm.sapPoNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"交接类型:"}},[a("el-select",{attrs:{placeholder:"请选择订单状态",clearable:""},model:{value:e.searchForm.allocationStatus,callback:function(t){e.$set(e.searchForm,"allocationStatus",t)},expression:"searchForm.allocationStatus"}},[a("el-option",{attrs:{label:"入库",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"出库",value:"2"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"库区:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入承运商"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户订单号:",prop:"customerName"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.searchForm.customerName,callback:function(t){e.$set(e.searchForm,"customerName",t)},expression:"searchForm.customerName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"SAP订单号:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"所属项目:"}},[a("el-select",{attrs:{placeholder:"请选择所属项目",clearable:""},model:{value:e.searchForm.projectCode,callback:function(t){e.$set(e.searchForm,"projectCode",t)},expression:"searchForm.projectCode"}},[a("el-option",{attrs:{label:"所属项目一",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"所属项目二",value:"2"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户名称:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入承运商"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"垛口:",prop:"customerName"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.searchForm.customerName,callback:function(t){e.$set(e.searchForm,"customerName",t)},expression:"searchForm.customerName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"ASN单号:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"客户PO单号:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入供应商名称"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"SAP PO单号:",prop:"supplierName"}},[a("el-input",{attrs:{placeholder:"请输入承运商"},model:{value:e.searchForm.supplierName,callback:function(t){e.$set(e.searchForm,"supplierName",t)},expression:"searchForm.supplierName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"承运商:"}},[a("el-select",{attrs:{placeholder:"请选择所属项目",clearable:""},model:{value:e.searchForm.projectCode,callback:function(t){e.$set(e.searchForm,"projectCode",t)},expression:"searchForm.projectCode"}},[a("el-option",{attrs:{label:"承运商A",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"承运商B",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"承运商C",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"预约时间"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"requireDeliveryTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchForm.requireDeliveryTime,callback:function(t){e.$set(e.searchForm,"requireDeliveryTime",t)},expression:"searchForm.requireDeliveryTime"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"requireDeliveryTime"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.searchForm.requireDeliveryTime,callback:function(t){e.$set(e.searchForm,"requireDeliveryTime",t)},expression:"searchForm.requireDeliveryTime"}})],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"分配时间"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"requireDeliveryTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.searchForm.requireDeliveryTime,callback:function(t){e.$set(e.searchForm,"requireDeliveryTime",t)},expression:"searchForm.requireDeliveryTime"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"requireDeliveryTime"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.searchForm.requireDeliveryTime,callback:function(t){e.$set(e.searchForm,"requireDeliveryTime",t)},expression:"searchForm.requireDeliveryTime"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"fixedSeachBtn"},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:e.handleFilter}},[e._v("查询")])],1)])],1)],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(u,p,!1,function(e){a("/dBy"),a("H1mJ")},"data-v-256e8426",null).exports,d={name:"AllocationModal",extends:c.a,props:{AllocationModal:{}},data:function(){return{dataForm:{},rules:{}}},computed:{dialogFormVisible:function(){return this.AllocationModal.visible}},methods:{beforeOpen:function(){this.dataForm=this.AllocationModal.current,this.$refs.dataForm&&this.$refs.dataForm.clearValidate()},ok:function(){var e=this;e.$refs.dataForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$emit("AllocationModal-ok",e.dataForm)})},handleClose:function(e){this.$emit("AllocationModal-cancel",{})}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-dialog",{attrs:{title:e.AllocationModal.title,visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogFormVisible=t},open:e.beforeOpen}},[a("div",{staticClass:"projDetail"},[a("div",{staticClass:"tableForm"},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.dataForm,"label-position":"right","label-width":"15%"}})],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["detail"!=e.AllocationModal.type?a("el-button",{on:{click:e.handleClose}},[e._v("取消")]):e._e(),e._v(" "),"detail"!=e.AllocationModal.type?a("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确定")]):e._e(),e._v(" "),"detail"==e.AllocationModal.type?a("el-button",{attrs:{type:"primary"},on:{click:e.handleClose}},[e._v("关闭")]):e._e()],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(d,h,!1,function(e){a("Zzfh")},"data-v-6b342353",null).exports,f=a("jsdL"),y={name:"AllocationList",extends:c.a,components:{AllocationSearch:m,AllocationModal:v},data:function(){return{tableKey:0,list:null,total:null,listLoading:!0,listQuery:{currentPage:1,pageSize:10},pageInfo:{},RowSelection:[],searchParams:{},AllocationModal:{visible:!1,title:"",type:"",current:{}},pageSizeOptions:f.a.PageSizeOptions,tableHeight:f.a.WindowHeight-300}},created:function(){this.getList()},computed:{deleteStatus:function(){return!(this.RowSelection.length>0)}},methods:{getList:function(){var e=this;e.listLoading=!0;var t=e.listQuery;t=o()({},t,e.searchParams),n.queryAllocation({data:t,success:function(t){e.list=t.data.data,e.pageInfo=t.data.pageInfo,setTimeout(function(){e.listLoading=!1},500)},fail:function(t){e.listLoading=!1,e.$notify.error({title:"提示",message:t.data.message})}})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.currentPage=e,this.getList()},handleCreate:function(){this.AllocationModal.visible=!0,this.AllocationModal.title="新增配载信息",this.AllocationModal.type="create",this.AllocationModal.current={}},handleUpdate:function(e){this.AllocationModal.visible=!0,this.AllocationModal.title="编辑配载信息",this.AllocationModal.type="update",this.AllocationModal.current=e},onView:function(e){this.AllocationModal.current=e,this.AllocationModal.title="查看详情",this.AllocationModal.type="detail",this.AllocationModal.visible=!0},handleDelete:function(){var e=this,t=[];for(var a in e.RowSelection)t.push(e.RowSelection[a].userId);e.$confirm("自定义删除信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){n.changeAllocation({data:{AllocationIds:t,status:"delete"},success:function(t){e.$message({type:"success",message:t.data.message}),e.getList()},fail:function(t){e.$notify.error({title:"提示",message:t.data.message})}})})},handleSelectionChange:function(e){this.RowSelection=e},modalCancel:function(){this.AllocationModal.visible=!1,this.AllocationModal.current={},this.AllocationModal.title="",this.AllocationModal.type=""},modalOk:function(e){var t=this;"create"==t.AllocationModal.type?n.createAllocation({data:e,success:function(e){t.$message({type:"success",message:"操作成功!"}),t.getList(),t.AllocationModal.visible=!1},fail:function(e){t.$notify.error({title:"提示",message:e.data.message})}}):n.updateAllocation({data:e,success:function(e){t.$message({type:"success",message:"操作成功!"}),t.getList(),t.AllocationModal.visible=!1},fail:function(e){t.$notify.error({title:"提示",message:e.data.message})}})},searchSubmit:function(e){this.searchParams=e,this.listQuery.currentPage=1,this.listLoading=!0,this.getList()}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("Allocation-search",{on:{"on-search":e.searchSubmit}}),e._v(" "),a("div",{staticClass:"tableDiv"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,attrs:{stripe:"",data:e.list,fit:"","highlight-current-row":"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"配载单号",align:"center",prop:"allocationNo",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"交接类型",align:"center",prop:"connectType",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"车牌号",align:"center",prop:"carNo",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"allocationStatus",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"客户名称",align:"center",prop:"customerName",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"垛口",align:"center",prop:"crenelName",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"预约时间",align:"center",prop:"reservationTime",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"分配时间",align:"center",prop:"distributionTime",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.onView(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.handleUpdate(t.row)}}},[e._v("审核")])]}}])})],1),e._v(" "),a("div",[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.listQuery.currentPage,"page-size":100,layout:"prev, pager, next, total,jumper",total:2400},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.listQuery,"currentPage",t)},"update:current-page":function(t){return e.$set(e.listQuery,"currentPage",t)}}})],1)])],1),e._v(" "),a("Allocation-modal",{attrs:{AllocationModal:e.AllocationModal},on:{"AllocationModal-cancel":e.modalCancel,"AllocationModal-ok":e.modalOk}})],1)},staticRenderFns:[]};var g=a("VU/8")(y,b,!1,function(e){a("T9Vh")},"data-v-c73f64da",null);t.default=g.exports},Zzfh:function(e,t){},jsdL:function(e,t,a){"use strict";var l={PageSizeOptions:[10,20,50,100],NormalHeight:265,WindowHeight:document.documentElement.clientHeight,StaffTypes:[{key:"MANAGER",value:"管理员"},{key:"COMMON",value:"普通员工"}],StatusList:[{key:"ON",value:"启用"},{key:"OFF",value:"禁用"}],GoodsTypeList:[{key:"PH",value:"普货"},{key:"MG",value:"敏感"}],OwnershipTypeList:[{key:"GY",value:"国有"},{key:"SZ",value:"三资"},{key:"MY",value:"民营"}],SalesChannelList:[{key:"DL",value:"代理"},{key:"ZJ",value:"直接"},{key:"YCX",value:"一次性客户"}],StrategicNatureList:[{key:"FZLGJ",value:"非战略改进"},{key:"FZLWX",value:"非战略维系"},{key:"ZLMB",value:"战略目标"},{key:"ZLWX",value:"战略维系"}],TradeIdentityList:[{key:"KH",value:"客户"},{key:"GYS",value:"供应商"}],AuthStatusList:[{key:"WRZ",value:"未认证"},{key:"SHZ",value:"待审核"},{key:"RZTG",value:"认证通过"},{key:"RZBTG",value:"认证不通过"}],ReletedFunctionList:[{key:"BUSINESS",value:"营业执照"},{key:"IDENTITYFM",value:"身份证反面"},{key:"IDENTITYZM",value:"身份证正面"},{key:"LETTER",value:"企业公函"},{key:"RTPC",value:"道路运输许可证"},{key:"NVOCC",value:"NVOCC"}],PrivateList:[{key:"Y",value:"私有"},{key:"N",value:"公有"}],EffectiveList:[{key:"Y",value:"是"},{key:"N",value:"否"}],ChargeTypeList:[{key:"YJFM",value:"月结费目"},{key:"YSDFM",value:"运输单费目"},{key:"ZCDFM",value:"装车单费目"}],PaymentTypeList:[{key:"YJ",value:"月结"},{key:"XJ",value:"现结"},{key:"ZZ",value:"转账"},{key:"YFK",value:"预付款"}],ChargePlanTypeList:[{key:"zcdjf",value:"装车单计费"},{key:"ckddjf",value:"出库订单计费"}],RpTypeList:[{key:"ar",value:"应收"},{key:"ap",value:"应付"},{key:"dd",value:"代收代付"},{key:"ds",value:"代收"},{key:"df",value:"代付"},{key:"sf",value:"收和付"}],AuthTemplateList:[{key:"BUSINESS",value:"营业执照"},{key:"IDENTITY",value:"身份证"},{key:"LETTER",value:"企业公函"},{key:"RTPC",value:"道路运输许可证"},{key:"NVOCC",value:"nvocc"}],IsSigns:[{key:"Y",value:"已签约"},{key:"N",value:"未签约"}]};t.a=l}});