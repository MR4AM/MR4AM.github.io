webpackJsonp([15],{"4rbT":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o={data:function(){return{}},mounted:function(){window.addEventListener("resize",function(){canvas.width=canvas.clientWidth,canvas.height=canvas.clientHeight,cx=canvas.width/2,cy=canvas.height/2}),this.initVars(),this.frame()},methods:{initVars:function(){Math.PI,canvas.getContext("2d");canvas.width=canvas.clientWidth,canvas.height=canvas.clientHeight;var a,s;canvas.width,canvas.height;new Array,a=new Array,s="https://cantelope.org/NYE/";for(var e=1;e<=10;++e){var i=new Image;i.src=s+"spark"+e+".png",a.push(i)}new Array;new Audio(s+"pow1.ogg"),new Audio(s+"pow2.ogg"),new Audio(s+"pow3.ogg"),new Audio(s+"pow4.ogg")},rasterizePoint:function(a,s,e){var i,t;a-=playerX,s-=playerY,e-=playerZ,i=Math.atan2(a,e),t=Math.sqrt(a*a+e*e),a=Math.sin(i-yaw)*t,e=Math.cos(i-yaw)*t,i=Math.atan2(s,e),t=Math.sqrt(s*s+e*e),s=Math.sin(i-pitch)*t;var r=a,p=e=Math.cos(i-pitch)*t,n=2e3*(p-0)-0*(r-0);if(!n)return{x:0,y:0,d:-1};var o=(1*(r-0)- -1e3*(p-0))/n,c=2e3/n;return e||(e=1e-9),o>0&&o<1&&c>0&&c<1?{x:cx+(2e3*o-1e3)*scale,y:cy+s/e*scale,d:Math.sqrt(a*a+s*s+e*e)}:{x:cx+(2e3*o-1e3)*scale,y:cy+s/e*scale,d:-1}},spawnSeed:function(){seed=new Object,seed.x=100*Math.random()-50,seed.y=25,seed.z=100*Math.random()-50,seed.vx=.1-.2*Math.random(),seed.vy=-1.5,seed.vz=.1-.2*Math.random(),seed.born=frames,seeds.push(seed)},splode:function(a,e,i){switch(t=5+parseInt(150*Math.random()),sparkV=1+2.5*Math.random(),type=parseInt(3*Math.random()),type){case 0:pic1=parseInt(10*Math.random());break;case 1:pic1=parseInt(10*Math.random());do{pic2=parseInt(10*Math.random())}while(pic2==pic1);break;case 2:pic1=parseInt(10*Math.random());do{pic2=parseInt(10*Math.random())}while(pic2==pic1);do{pic3=parseInt(10*Math.random())}while(pic3==pic1||pic3==pic2)}for(m=1;m<t;++m){switch(spark=new Object,spark.x=a,spark.y=e,spark.z=i,p1=2*pi*Math.random(),p2=pi*Math.random(),v=sparkV*(1+Math.random()/6),spark.vx=Math.sin(p1)*Math.sin(p2)*v,spark.vz=Math.cos(p1)*Math.sin(p2)*v,spark.vy=Math.cos(p2)*v,type){case 0:spark.img=sparkPics[pic1];break;case 1:spark.img=sparkPics[parseInt(2*Math.random())?pic1:pic2];break;case 2:switch(parseInt(3*Math.random())){case 0:spark.img=sparkPics[pic1];break;case 1:spark.img=sparkPics[pic2];break;case 2:spark.img=sparkPics[pic3]}}spark.radius=25+50*Math.random(),spark.alpha=1,spark.trail=new Array,sparks.push(spark)}switch(parseInt(4*Math.random())){case 0:pow=new Audio(s+"pow1.ogg");break;case 1:pow=new Audio(s+"pow2.ogg");break;case 2:pow=new Audio(s+"pow3.ogg");break;case 3:pow=new Audio(s+"pow4.ogg")}d=Math.sqrt((a-playerX)*(a-playerX)+(e-playerY)*(e-playerY)+(i-playerZ)*(i-playerZ)),pow.volume=1.5/(1+d/10),pow.play()},doLogic:function(){for(seedTimer<frames&&(seedTimer=frames+seedInterval*Math.random()*10,spawnSeed()),i=0;i<seeds.length;++i)seeds[i].vy+=gravity,seeds[i].x+=seeds[i].vx,seeds[i].y+=seeds[i].vy,seeds[i].z+=seeds[i].vz,frames-seeds[i].born>seedLife&&(splode(seeds[i].x,seeds[i].y,seeds[i].z),seeds.splice(i,1));for(i=0;i<sparks.length;++i)sparks[i].alpha>0&&sparks[i].radius>5?(sparks[i].alpha-=.01,sparks[i].radius/=1.02,sparks[i].vy+=gravity,point=new Object,point.x=sparks[i].x,point.y=sparks[i].y,point.z=sparks[i].z,sparks[i].trail.length?(x=sparks[i].trail[sparks[i].trail.length-1].x,y=sparks[i].trail[sparks[i].trail.length-1].y,z=sparks[i].trail[sparks[i].trail.length-1].z,d=(point.x-x)*(point.x-x)+(point.y-y)*(point.y-y)+(point.z-z)*(point.z-z),d>9&&sparks[i].trail.push(point)):sparks[i].trail.push(point),sparks[i].trail.length>5&&sparks[i].trail.splice(0,1),sparks[i].x+=sparks[i].vx,sparks[i].y+=sparks[i].vy,sparks[i].z+=sparks[i].vz,sparks[i].vx/=1.075,sparks[i].vy/=1.075,sparks[i].vz/=1.075):sparks.splice(i,1);p=Math.atan2(playerX,playerZ),d=Math.sqrt(playerX*playerX+playerZ*playerZ),d+=Math.sin(frames/80)/1.25,t=Math.sin(frames/200)/40,playerX=Math.sin(p+t)*d,playerZ=Math.cos(p+t)*d,yaw=pi+p+t},rgb:function(a){var s=parseInt(16*(.5+.5*Math.sin(a))),e=parseInt(16*(.5+.5*Math.cos(a))),i=parseInt(16*(.5-.5*Math.sin(a)));return"#"+s.toString(16)+e.toString(16)+i.toString(16)},draw:function(){var s=canvas.getContext("2d");for(s.clearRect(0,0,2*cx,2*cy),s.fillStyle="#ff8",i=-100;i<100;i+=3)for(j=-100;j<100;j+=4)x=i,z=j,y=25,point=rasterizePoint(x,y,z),-1!=point.d&&(size=250/(1+point.d),d=Math.sqrt(x*x+z*z),a=.75-.75*Math.pow(d/100,6),a>0&&(s.globalAlpha=a,s.fillRect(point.x-size/2,point.y-size/2,size,size)));for(s.globalAlpha=1,i=0;i<seeds.length;++i)point=rasterizePoint(seeds[i].x,seeds[i].y,seeds[i].z),-1!=point.d&&(size=200/(1+point.d),s.fillRect(point.x-size/2,point.y-size/2,size,size));for(point1=new Object,i=0;i<sparks.length;++i)if(point=rasterizePoint(sparks[i].x,sparks[i].y,sparks[i].z),-1!=point.d){if(size=200*sparks[i].radius/(1+point.d),sparks[i].alpha<0&&(sparks[i].alpha=0),sparks[i].trail.length){switch(point1.x=point.x,point1.y=point.y,sparks[i].img){case sparkPics[0]:s.strokeStyle="#f84";break;case sparkPics[1]:s.strokeStyle="#84f";break;case sparkPics[2]:s.strokeStyle="#8ff";break;case sparkPics[3]:s.strokeStyle="#fff";break;case sparkPics[4]:s.strokeStyle="#4f8";break;case sparkPics[5]:s.strokeStyle="#f44";break;case sparkPics[6]:s.strokeStyle="#f84";break;case sparkPics[7]:s.strokeStyle="#84f";break;case sparkPics[8]:s.strokeStyle="#fff";break;case sparkPics[9]:s.strokeStyle="#44f"}for(j=sparks[i].trail.length-1;j>=0;--j)point2=rasterizePoint(sparks[i].trail[j].x,sparks[i].trail[j].y,sparks[i].trail[j].z),-1!=point2.d&&(s.globalAlpha=j/sparks[i].trail.length*sparks[i].alpha/2,s.beginPath(),s.moveTo(point1.x,point1.y),s.lineWidth=1+10*sparks[i].radius/(sparks[i].trail.length-j)/(1+point2.d),s.lineTo(point2.x,point2.y),s.stroke(),point1.x=point2.x,point1.y=point2.y)}s.globalAlpha=sparks[i].alpha,s.drawImage(sparks[i].img,point.x-size/2,point.y-size/2,size,size)}},frame:function(a){function s(){return a.apply(this,arguments)}return s.toString=function(){return a.toString()},s}(function(){frames>1e5&&(seedTimer=0,frames=0),frames++,this.draw(),this.doLogic(),this.requestAnimationFrame(frame)})}},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var a=this.$createElement,s=this._self._c||a;return s("div",{staticClass:"fireframesCom"},[s("canvas",{attrs:{id:"canvas",width:"1980",height:"1743"}})])}]};var h=n("VU/8")(o,c,!1,function(a){n("ZU9T")},null,null);r.default=h.exports},ZU9T:function(a,s){}});
//# sourceMappingURL=15.a110a54ac5beb82d26ed.js.map